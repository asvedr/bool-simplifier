1 возвращать результат не строкой а указателем на структуру
2 сделать враппер для структура -> строка, структура -> глубина, удаление структуры по указателю
3 сделать несколько запусков генератора, возможно параллельно
4 выбрать с наименьшей глубиной
5 его в строку и почистить все
6 ???
7 PROFIT!!11!1
